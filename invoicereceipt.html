<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sehr Academy — Invoice</title>
  <meta name="theme-color" content="#8BC53F" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700;800;900&family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    :root{
      --sehr:#8BC53F; --ink:#0b0f10; --muted:#6b7280; --dark:#1f2937;
      --paper:#ffffff; --line:rgba(0,0,0,.08); --soft:#f5f7f2; --shadow:0 18px 44px rgba(16,24,40,.10);
      --radius:16px; --radius-sm:12px; --maxw:210mm; /* A4 width */
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:"Open Sans",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--ink); background:#ffffff;
      background-image:
        linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.98)),
        url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 160 160">\
<defs><pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">\
<path d="M 40 0 L 0 0 0 40" fill="none" stroke="%23ececec" stroke-width="1" opacity="0.35"/></pattern></defs>\
<rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
      background-attachment: fixed, fixed;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .wrap{max-width:var(--maxw);margin:14mm auto;padding:12mm}

    /* Header band */
    .bill{
      background:var(--paper); border:1px solid var(--line); border-radius:var(--radius);
      box-shadow:var(--shadow); overflow:hidden; width:100%;
    }
    .head{ position:relative; padding:18px 22px 12px 22px; border-bottom:1px solid var(--line); }
    .brand{display:flex; align-items:center; gap:14px}
    .brand .name{display:flex; align-items:baseline; gap:8px; text-decoration:none}
    .name span:nth-child(1){font-family:Montserrat,sans-serif; font-weight:900; font-size:30px; color:var(--sehr)}
    .name span:nth-child(2){font-family:Montserrat,sans-serif; font-weight:900; font-size:30px; color:#0b0f10}
    .addr{color:var(--dark); font-weight:800; letter-spacing:.3px}
    .subaddr{color:var(--muted); font-size:12px}

    .ribbon{ position:absolute; right:0; top:0; display:flex; align-items:center; gap:10px; color:#fff; background:#263238; padding:14px 22px 14px 40px; clip-path:polygon(24px 0, 100% 0, 100% 100%, 0 100%); font-family:Montserrat,sans-serif; font-weight:900; font-size:18px; letter-spacing:.6px; }
    .ribbon::before{content:""; position:absolute; right:calc(100% - 24px); top:0; bottom:0; width:24px; background:var(--sehr)}

    .meta{margin-top:12px; display:grid; grid-template-columns:1fr auto; gap:10px}
    .meta .left{display:grid; gap:4px}
    .meta .right{display:grid; gap:6px; justify-items:end}
    .badge{background:#eef8df; border:1px solid #e0f2c8; color:#2a3d10; font-weight:800; font-size:12px; padding:6px 10px; border-radius:999px; display:inline-block}
    .kv{display:flex; gap:6px; align-items:center; font-size:13px}
    .kv b{font-weight:800}

    /* Table */
    table{width:100%; border-collapse:separate; border-spacing:0; margin-top:18px}
    thead th{font-family:Montserrat,sans-serif; font-size:12px; text-align:left; padding:10px; color:#111; background:#f0f7e6; border-bottom:2px solid #dfead2}
    thead th.dark{background:#2b2b2b; color:#fff; border-color:#2b2b2b}
    thead th:nth-child(3), thead th:nth-child(4){ text-align:center; } /* centered headers */
    tbody td{padding:12px 10px; border-bottom:1px solid #ececec; vertical-align:top}
    .num{text-align:right; font-variant-numeric:tabular-nums}
    .center{text-align:center}
    .desc b{font-family:Montserrat,sans-serif}
    .desc small{display:block; color:var(--muted)}

    /* Selection cell */
    .sel{width:84px; text-align:center}
    .check{ width:34px; height:34px; display:inline-grid; place-items:center; border-radius:8px; background:linear-gradient(180deg,#f7f7f7,#ffffff); border:1px solid #ddd; box-shadow:inset 0 1px 0 #fff; margin:auto; cursor:pointer; }
    .check[data-selected="true"]{ background:linear-gradient(180deg,#eaf6d5,#ffffff); border-color:#dff0c7; box-shadow:0 6px 14px rgba(139,197,63,.18), inset 0 1px 0 #fff; }
    .check svg{width:20px; height:20px; opacity:0}
    .check[data-selected="true"] svg{opacity:1}

    /* Totals area */
    .bottom{display:grid; grid-template-columns:1fr 360px; gap:16px; padding:14px 22px}
    @media(max-width:860px){.bottom{grid-template-columns:1fr}}

    .totals{background:#fbfdf7; border:1px solid #e6f2d8; border-radius:12px; padding:12px}
    .line{display:flex; align-items:center; justify-content:space-between; padding:6px 0}
    .grand{margin-top:8px; background:#2b2b2b; color:#fff; border-radius:10px; padding:10px 12px; font-family:Montserrat,sans-serif; font-weight:900}
    .note-green{color:#2a3d10; font-weight:800; font-size:12px; margin-top:6px; display:flex; align-items:center; justify-content:space-between; gap:10px}
    .note-green .pct{min-width:64px; text-align:right}
    .editable{outline:2px dashed transparent}
    .editable:focus{outline-color:#dff0c7}

    .terms{padding:0 22px 14px 22px; color:#4b5563; font-size:12.5px}

    .footer{ padding:14px 22px 20px 22px; display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between; border-top:1px solid var(--line); background:#f9faf8 }
    .contact{display:grid; gap:2px}
    .logo-word{font-family:Montserrat,sans-serif; font-weight:900; letter-spacing:.4px}
    .logo-word span:first-child{color:var(--sehr)}
    .sig{min-width:200px}
    .sig .line{border-top:2px solid #111; margin-top:24px; padding-top:6px; font-weight:700; text-align:center}

    /* Print to A4 */
    @page{ size: A4; margin: 12mm; }
    @media print{
      body{background:#fff}
      .wrap{margin:0 auto; padding:0}
      .bill{box-shadow:none; border-radius:0}
      .ribbon{position:absolute}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <article class="bill" id="invoice">
      <div class="head">
        <div class="ribbon">INVOICE</div>
        <div class="brand">
          <div class="name"><span>SEHR</span><span>ACADEMY</span></div>
          <div>
            <div class="addr editable" contenteditable>Plus One Science</div>
            <div class="subaddr editable" contenteditable>Ganeshamangalam, Vatanapally</div>
          </div>
        </div>

        <div class="meta">
          <div class="left">
            <div class="kv"><b>Invoice To:</b></div>
            <div class="editable" contenteditable>xxxxxx</div>
            <div class="editable" contenteditable>xxxxxx</div>
            <div class="editable" contenteditable>xxxxxx</div>
          </div>
          <div class="right">
            <span class="badge">REGN NO</span>
            <div class="kv"><b class="editable" contenteditable>xxxxxx</b></div>
            <div class="kv"><small>Joining Date:&nbsp;</small><b class="editable" contenteditable>xxxxxx</b></div>
            <div class="kv"><small>Invoice Date:&nbsp;</small><b id="invDate"></b></div>
          </div>
        </div>

        <table id="items">
          <thead>
            <tr>
              <th>Item description</th>
              <th class="dark sel">Selection</th>
              <th class="center">Unit Price</th>
              <th class="dark center">Total Price</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="desc">
                <b>Mathematics</b>
                <small>
                  Enrolment Period <span class="months editable" contenteditable>1</span> month(s) :
                  <span class="period editable" contenteditable>xxxxxx</span>
                </small>
              </td>
              <td class="sel">
                <div class="check" data-selected="true" role="checkbox" aria-checked="true" tabindex="0">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="#0b2c09" d="M20.3 5.7a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-1.4 0l-5-5a1 1 0 1 1 1.4-1.4l4.3 4.3 9.3-9.3a1 1 0 0 1 1.4 0z"/></svg>
                </div>
              </td>
              <td class="center unit"><span class="rate editable" contenteditable>₹ 700</span></td>
              <td class="num total">₹ 700</td>
            </tr>
            <tr>
              <td class="desc">
                <b>Physics</b>
                <small>
                  Enrolment Period <span class="months editable" contenteditable>1</span> month(s) :
                  <span class="period editable" contenteditable>xxxxxx</span>
                </small>
              </td>
              <td class="sel">
                <div class="check" data-selected="true" role="checkbox" aria-checked="true" tabindex="0">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="#0b2c09" d="M20.3 5.7a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-1.4 0l-5-5a1 1 0 1 1 1.4-1.4l4.3 4.3 9.3-9.3a1 1 0 0 1 1.4 0z"/></svg>
                </div>
              </td>
              <td class="center unit"><span class="rate editable" contenteditable>₹ 700</span></td>
              <td class="num total">₹ 700</td>
            </tr>
            <tr>
              <td class="desc">
                <b>Chemistry</b>
                <small>
                  Enrolment Period <span class="months editable" contenteditable>1</span> month(s) :
                  <span class="period editable" contenteditable>xxxxxx</span>
                </small>
              </td>
              <td class="sel">
                <div class="check" data-selected="true" role="checkbox" aria-checked="true" tabindex="0">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="#0b2c09" d="M20.3 5.7a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-1.4 0l-5-5a1 1 0 1 1 1.4-1.4l4.3 4.3 9.3-9.3a1 1 0 0 1 1.4 0z"/></svg>
                </div>
              </td>
              <td class="center unit"><span class="rate editable" contenteditable>₹ 600</span></td>
              <td class="num total">₹ 600</td>
            </tr>
            <tr>
              <td class="desc">
                <b>Biology</b>
                <small>
                  Enrolment Period <span class="months editable" contenteditable>1</span> month(s) :
                  <span class="period editable" contenteditable>xxxxxx</span>
                </small>
              </td>
              <td class="sel">
                <div class="check" data-selected="true" role="checkbox" aria-checked="true" tabindex="0">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="#0b2c09" d="M20.3 5.7a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-1.4 0l-5-5a1 1 0 1 1 1.4-1.4l4.3 4.3 9.3-9.3a1 1 0 0 1 1.4 0z"/></svg>
                </div>
              </td>
              <td class="center unit"><span class="rate editable" contenteditable>₹ 500</span></td>
              <td class="num total">₹ 500</td>
            </tr>
            <tr>
              <td class="desc">
                <b>English</b>
                <small>
                  Enrolment Period <span class="months editable" contenteditable>0</span> month(s) :
                  <span class="period editable" contenteditable>xxxxxx</span>
                </small>
              </td>
              <td class="sel">
                <div class="check" data-selected="false" role="checkbox" aria-checked="false" tabindex="0">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="#0b2c09" d="M20.3 5.7a1 1 0 0 1 0 1.4l-10 10a1 1 0 0 1-1.4 0l-5-5a1 1 0 1 1 1.4-1.4l4.3 4.3 9.3-9.3a1 1 0 0 1 1.4 0z"/></svg>
                </div>
              </td>
              <td class="center unit"><span class="rate editable" contenteditable>₹ 300</span></td>
              <td class="num total">₹ 0</td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="bottom">
        <div></div>
        <div class="totals">
          <div class="line"><span>Sub Total</span><b id="subTotal">₹ 0</b></div>
          <div class="line"><span class="editable" id="discLabel" contenteditable>Discounts</span><b id="discounts" style="color:#178a00">₹ 0</b></div>
          <div class="grand"><div style="display:flex;justify-content:space-between;align-items:center"><span>Grand Total</span><span id="grand">₹ 0</span></div></div>
          <div class="note-green" id="discNote">
            <span class="editable" contenteditable>Early Enrollment Discount</span>
            <span class="pct"><span id="discPct" class="editable" contenteditable>0</span>%</span>
          </div>
        </div>
      </div>

      <div class="terms">
        <b>Terms & Conditions:</b> Tuition fees are non-refundable once enrolled. Discounts are calculated on the subtotal before taxes (if any). Sehr Academy reserves the right to update or discontinue any offer without prior notice.
      </div>

      <div class="footer">
        <div class="logo-word"><span>SEHR</span> ACADEMY</div>
        <div class="contact">
          <div><b>+91 9539409586</b> · <b>+91 9037789586</b></div>
          <div>sehracademy.com</div>
          <div>Ganeshamangalam, Vatanapally</div>
        </div>
        <div class="sig"><div class="line">Administrator</div></div>
      </div>
    </article>
    <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:8px">
      <button class="btn" onclick="window.print()" style="border:1px solid #dfead2; background:linear-gradient(180deg,#eef8df,#ffffff); font-weight:800">Print / Save PDF</button>
    </div>
  </div>

  <script>
    const fmtINR = (n)=> '₹ ' + (isFinite(n)? Math.round(n):0).toLocaleString('en-IN');

    function parseRupeesText(txt){
      if(!txt) return 0;
      const n = parseFloat(String(txt).replace(/[^0-9.-]/g,''));
      return isFinite(n) ? n : 0;
    }

    function rateFromCell(cell){
      const r = cell?.querySelector('.rate')?.textContent || '';
      return parseRupeesText(r);
    }

    function recalc(){
      let sub = 0; const rows = document.querySelectorAll('#items tbody tr');
      rows.forEach(tr=>{
        const selected = tr.querySelector('.check')?.dataset.selected === 'true';
        const rate = rateFromCell(tr.querySelector('.unit'));
        const mEl = tr.querySelector('.months');
        let months = parseFloat((mEl?.textContent||'1').replace(/[^0-9.]/g,''));
        if(!isFinite(months) || months <= 0) months = 0; // allow 0
        const total = selected ? Math.round(rate * months) : 0;
        tr.querySelector('.total').textContent = fmtINR(total);
        sub += total;
      });

      // Percentage-driven discount
      const pct = parseRupeesText(document.getElementById('discPct').textContent);
      const discount = Math.max(0, Math.round(sub * (pct/100)));

      document.getElementById('subTotal').textContent = fmtINR(sub);
      document.getElementById('discounts').textContent = fmtINR(discount);
      document.getElementById('grand').textContent = fmtINR(Math.max(0, sub - discount));
    }

    // Toggle selection via click/keyboard
    document.querySelectorAll('.check').forEach(box=>{
      const toggle=()=>{
        const sel = box.dataset.selected !== 'true';
        box.dataset.selected = sel ? 'true':'false';
        box.setAttribute('aria-checked', sel?'true':'false');
        recalc();
      };
      box.addEventListener('click', toggle);
      box.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); toggle(); } });
    });

    // Recalc on edits to months, unit rates, or discount percent
    document.addEventListener('input', (e)=>{
      if(e.target.classList.contains('months') || e.target.classList.contains('rate') || e.target.id === 'discPct'){
        recalc();
      }
    });

    // Set invoice date
    document.getElementById('invDate').textContent = new Date().toLocaleDateString(undefined,{day:'2-digit',month:'long',year:'numeric'});

    // Initial calc
    recalc();
  </script>
</body>
</html>
