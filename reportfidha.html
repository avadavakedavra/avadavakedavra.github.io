<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sehr Academy — Student Profile</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700;800;900&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#8BC53F">

  <style>
    :root{
      --sehr-green:#8BC53F; --ink:#0F172A; --muted:#5b6475;
      --panel: rgba(255,255,255,0.75); --panel-strong: rgba(255,255,255,0.92);
      --glass-border: rgba(255,255,255,0.55); --shadow: 0 10px 30px rgba(15,23,42,.10); --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: Nunito, sans-serif; color:var(--ink);
      background:#edf3e7;
    }
    .wrap{padding:32px 20px; max-width:1100px; margin:auto;}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px;}
    .logo{font-family:Montserrat;font-weight:900;font-size:28px;text-decoration:none;color:var(--ink);}
    .logo b{color:var(--sehr-green);}

    .card{background:var(--panel);border:1px solid var(--glass-border);border-radius:var(--radius);box-shadow:var(--shadow);padding:18px;margin-top:18px;}

    /* Profile */
    .profile{display:grid;grid-template-columns:100px 1fr;gap:18px;align-items:center;}
    .avatar{width:100px;height:100px;border-radius:18px;overflow:hidden;background:#fff}
    .avatar img{width:100%;height:100%;object-fit:cover;}
    .info{display:grid;grid-template-columns:repeat(4,minmax(120px,1fr));gap:12px;}
    .k{background:var(--panel-strong);border:1px solid var(--glass-border);border-radius:14px;padding:12px;}
    .k small{display:block;color:var(--muted);font-size:12px;text-transform:uppercase}
    .k b{font-family:Montserrat;font-size:16px;margin-top:4px;display:block}

    /* Results Sections */
    .section h2{font-family:Montserrat;font-weight:800;font-size:22px;margin:0 0 10px;}

    /* Subject averages */
    .avg-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin:12px 0;}
    .avg-card{background:#fff;border:1px solid var(--glass-border);border-radius:16px;padding:14px;position:relative;}
    .avg-top{display:flex;justify-content:space-between;}
    .avg-card .s{font-family:Montserrat;font-size:14px;font-weight:800}
    .avg-card .v{font-family:Montserrat;font-weight:900;font-size:20px}

    /* ==== TERM STYLING ==== */
    details.term{background:var(--panel);border:1px solid var(--glass-border);border-radius:16px;margin-top:12px;}
    details.term summary{
      list-style:none;
      cursor:pointer;
      display:flex;
      align-items:center;
      gap:8px;
      padding:10px 14px;
    }
    details.term summary::-webkit-details-marker{display:none}
    details.term summary span{
      font-family:Montserrat,sans-serif;
      font-weight:800;
      font-size:11px;          /* very small letters */
      text-transform:lowercase;
      padding:6px 12px;
      border-radius:999px;
      background:#fff;
      border:1px solid var(--glass-border);
      box-shadow:inset 0 -1px 0 rgba(0,0,0,.05);
    }

    .term-body{padding:10px 16px 18px;background:rgba(255,255,255,0.6);border-top:1px dashed rgba(15,23,42,.08);}
    .exam-row{display:grid;grid-template-columns:80px 1fr 70px;align-items:center;gap:12px;padding:10px 8px;}
    .label{font-family:Montserrat;font-weight:800;background:#fff;border:1px solid var(--glass-border);border-radius:12px;padding:6px 10px;text-align:center;}
    .bar{height:12px;border-radius:999px;background:rgba(15,23,42,.08);overflow:hidden;position:relative;}
    .bar i{position:absolute;inset:0;width:0%;transition:width 1s; background:var(--sehr-green);}
    .pct{text-align:right;font-family:Montserrat;font-weight:800}
  </style>
</head>

<body>
  <div class="wrap">
    <header id="site-header"></header>
<script src="/assets/nav.js" defer></script>

    <!-- Profile -->
    <section class="card profile">
      <div class="avatar"><img src="" alt="Profile" id="profile-avatar"></div>
      <div class="info">
        <div class="k"><small>Student</small><b id="k-name">—</b></div>
        <div class="k"><small>Class</small><b id="k-class">—</b></div>
        <div class="k"><small>Joining</small><b id="k-join">—</b></div>
        <div class="k"><small>Birthday</small><b id="k-bday">—</b></div>
      </div>
    </section>

    <!-- Results -->
    <section class="card">
      <h2>Results</h2>

      <!-- Subject averages -->
      <div class="avg-grid">
        <div class="avg-card"><div class="avg-top"><span class="s">Physics</span><span class="v">—</span></div></div>
        <div class="avg-card"><div class="avg-top"><span class="s">Maths</span><span class="v">—</span></div></div>
        <div class="avg-card"><div class="avg-top"><span class="s">Chemistry</span><span class="v">—</span></div></div>
        <div class="avg-card"><div class="avg-top"><span class="s">Biology</span><span class="v">—</span></div></div>
      </div>

      <!-- First Term -->
      <details class="term" open>
        <summary>
          <span>first term</span>
          <span id="term-range">may – sep 2025</span>
        </summary>
        <div class="term-body" id="first-term"></div>
      </details>

      <!-- Second Term -->
      <details class="term">
        <summary>
          <span>second term</span>
          <span id="term2-range">sep – dec 2025</span>
        </summary>
        <div class="term-body" id="second-term"></div>
      </details>
    </section>
  </div>

  <script>
    // Example loader for fidha.json
    document.addEventListener('DOMContentLoaded', async ()=>{
      const res = await fetch('/students/fidha.json');
      const data = await res.json();
      document.getElementById('profile-avatar').src = data.meta.avatar;
      document.getElementById('k-name').textContent = data.meta.name;
      document.getElementById('k-class').textContent = data.meta.className;
      document.getElementById('k-join').textContent = data.meta.joinDate;
      document.getElementById('k-bday').textContent = data.meta.birthday;

      // Fill exam rows
      const render = (arr, host) => {
        host.innerHTML = arr.map(r => `
          <div class="exam-row">
            <div class="label">${r.label}</div>
            <div class="bar"><i style="width:${r.pct||0}%"></i></div>
            <div class="pct">${r.pct==null?'Pending':r.pct+'%'}</div>
          </div>`).join('');
      };
      render(data.internals.first, document.getElementById('first-term'));
      render(data.internals.second, document.getElementById('second-term'));
    });
  </script>
</body>
</html>
