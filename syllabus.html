<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sehr Academy — Class 11 Syllabus (Google Sheets)</title>
  <meta name="theme-color" content="#8BC53F" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --sehr-green:#8BC53F;
      --glass-border: rgba(0,0,0,.08);
      --radius: 16px;
      --maxw:1180px;
      --frost-white: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70));
      --frost-green: linear-gradient(180deg, rgba(214, 244, 190, .95), rgba(180, 232, 140, .78));
      --crystal: linear-gradient(180deg, rgba(255,255,255,.66), rgba(255,255,255,.30));
      --bar-gold: linear-gradient(90deg, #FBE7A1 0%, #F5C14A 50%, #D89A00 100%);
      --hint-bg: linear-gradient(180deg,#ffffff,#f5f7fb);
      --pill-bg: linear-gradient(180deg,#ffffff, rgba(255,255,255,.82));
    }
    body{margin:0;font-family:Nunito;background:#fff}
    .pagehead{max-width:var(--maxw);margin:22px auto 10px;padding:0 20px}
    .title{font-family:Montserrat;font-weight:900;font-size:26px}
    .subtitle{color:#6b7280;font-weight:800}
    .stamp{font-family:Montserrat;font-weight:800;font-size:12px;color:#2b3345;opacity:.85}
    .controls{max-width:var(--maxw);margin:6px auto;padding:0 20px;display:flex;gap:10px;flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid var(--glass-border);background:#fff;font-weight:800;cursor:pointer}
    .chip[aria-pressed="true"]{outline:2px solid rgba(139,197,63,.45)}
    .search{flex:1;min-width:240px;display:flex;align-items:center;gap:8px;background:var(--hint-bg);border:1px solid var(--glass-border);border-radius:12px;padding:8px 12px}
    .search input{border:0;background:transparent;outline:none;flex:1;font-weight:800}
    .panel{max-width:var(--maxw);margin:10px auto;padding:16px 20px;border-radius:var(--radius);border:1px solid var(--glass-border);background:var(--frost-white)}
    .legend{display:flex;gap:12px;font-weight:800}
    .dot{width:10px;height:10px;border-radius:999px}
    .dot.pending{background:#cfd6df}
    .dot.ongoing{background:#f6c761}
    .dot.completed{background:#69c04c}
    details.group{max-width:var(--maxw);margin:14px auto;border-radius:16px;border:1px solid var(--glass-border);background:var(--frost-white)}
    details.group > summary{cursor:pointer;padding:16px 18px;display:flex;justify-content:space-between;font-family:Montserrat;font-weight:900}
    .subject-name{text-transform:uppercase}
    .prog-wrap{width:180px}
    .prog-rail{width:100%;height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .prog-fill{height:100%;width:0%;background:var(--bar-gold);transition:width .45s ease}
    .prog-note{font-size:10px;font-weight:900;text-align:right}
    .chapters{padding:12px;display:grid;gap:10px}
    .row{display:grid;grid-template-columns:1fr auto auto auto;gap:12px;padding:12px;border-radius:12px;background:var(--crystal)}
    .row.completed{background:var(--frost-green)}
    .status,.teacher,.date{font-family:Montserrat;font-weight:900;font-size:12px;padding:6px 8px;border-radius:8px;background:var(--pill-bg);min-width:80px;text-align:center}
    @media(max-width:640px){.row{grid-template-columns:1fr}.status,.teacher,.date{justify-self:start}}
  </style>
</head>
<body>
  <div class="pagehead">
    <div class="title">Class 11 Syllabus — Tracker</div>
    <div class="subtitle">Live from Google Sheets</div>
    <div class="stamp" id="last-updated"></div>
  </div>

  <div class="controls">
    <div id="filters">
      <button data-filter="all" class="chip" aria-pressed="true">All</button>
      <button data-filter="pending" class="chip" aria-pressed="false">Pending</button>
      <button data-filter="ongoing" class="chip" aria-pressed="false">Ongoing</button>
      <button data-filter="completed" class="chip" aria-pressed="false">Completed</button>
    </div>
    <div class="search">
      <input id="search" type="search" placeholder="Search chapters or teachers…" />
    </div>
  </div>

  <section class="panel">
    <div class="legend">
      <span class="chip"><span class="dot pending"></span> Pending</span>
      <span class="chip"><span class="dot ongoing"></span> Ongoing</span>
      <span class="chip"><span class="dot completed"></span> Completed</span>
    </div>
  </section>

  <details class="group"><summary><span class="subject-name">Physics</span><span class="prog-wrap"><div class="prog-rail"><div class="prog-fill" id="bar-physics"></div></div><div class="prog-note" id="note-physics">0/0</div></span></summary><div class="chapters" id="list-physics"></div></details>
  <details class="group"><summary><span class="subject-name">Chemistry</span><span class="prog-wrap"><div class="prog-rail"><div class="prog-fill" id="bar-chemistry"></div></div><div class="prog-note" id="note-chemistry">0/0</div></span></summary><div class="chapters" id="list-chemistry"></div></details>
  <details class="group"><summary><span class="subject-name">Mathematics</span><span class="prog-wrap"><div class="prog-rail"><div class="prog-fill" id="bar-mathematics"></div></div><div class="prog-note" id="note-mathematics">0/0</div></span></summary><div class="chapters" id="list-mathematics"></div></details>
  <details class="group"><summary><span class="subject-name">Botany</span><span class="prog-wrap"><div class="prog-rail"><div class="prog-fill" id="bar-botany"></div></div><div class="prog-note" id="note-botany">0/0</div></span></summary><div class="chapters" id="list-botany"></div></details>
  <details class="group"><summary><span class="subject-name">Zoology</span><span class="prog-wrap"><div class="prog-rail"><div class="prog-fill" id="bar-zoology"></div></div><div class="prog-note" id="note-zoology">0/0</div></span></summary><div class="chapters" id="list-zoology"></div></details>

  <script>
    const SHEET_ID="1JZ2b4tFp9xqHsauaqti2GtoiWaSLkERPIorJ2n7yAjo";
    const SHEET_NAME="Sheet1";
    const GVIZ_URL=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(SHEET_NAME)}`;
    const lists={physics:document.getElementById('list-physics'),chemistry:document.getElementById('list-chemistry'),mathematics:document.getElementById('list-mathematics'),botany:document.getElementById('list-botany'),zoology:document.getElementById('list-zoology')};
    const bars={physics:document.getElementById('bar-physics'),chemistry:document.getElementById('bar-chemistry'),mathematics:document.getElementById('bar-mathematics'),botany:document.getElementById('bar-botany'),zoology:document.getElementById('bar-zoology')};
    const notes={physics:document.getElementById('note-physics'),chemistry:document.getElementById('note-chemistry'),mathematics:document.getElementById('note-mathematics'),botany:document.getElementById('note-botany'),zoology:document.getElementById('note-zoology')};
    const lastUpdatedEl=document.getElementById('last-updated');

    function fmtDayMonth(s){if(!s)return'';const d=new Date(s);if(isNaN(d))return'';return d.getDate().toString().padStart(2,'0')+" "+d.toLocaleString('en-GB',{month:'short'})}
    function formatTeachers(it){if(Array.isArray(it.teachers))return it.teachers.join(', ');return it.teacher||'—'}

    function makeRow(it){const div=document.createElement('div');const st=(it.status||'pending').toLowerCase();const when=fmtDayMonth(it.expectedDate||'');const teachers=formatTeachers(it);div.className='row '+(st==='completed'?'completed':'');div.dataset.status=st;div.dataset.name=(it.title||'').toLowerCase();div.dataset.teachers=teachers.toLowerCase();div.innerHTML=`<div class="name">${it.index?it.index+'. ':''}${it.title}</div><div class="status ${st}">${st.toUpperCase()}</div><div class="teacher">${teachers}</div><div class="date">${when}</div>`;return div;}
    function setProgress(total,done,key){const pct=total?Math.round(done/total*100):0;bars[key].style.width=pct+"%";notes[key].textContent=`${done}/${total}`;}
    function render(arr,mount,key){mount.innerHTML='';let done=0;arr.sort((a,b)=>(a.index||999)-(b.index||999)).forEach(ch=>{if(ch.status==='completed')done++;mount.appendChild(makeRow(ch))});setProgress(arr.length,done,key);}
    function renderBio(bio){const bot=bio.filter(x=>x.stream==='botany');const zoo=bio.filter(x=>x.stream==='zoology');render(bot,lists.botany,'botany');render(zoo,lists.zoology,'zoology');}

    document.getElementById('filters').addEventListener('click',e=>{if(e.target.matches('button[data-filter]')){document.querySelectorAll('#filters button').forEach(b=>b.setAttribute('aria-pressed','false'));e.target.setAttribute('aria-pressed','true');applyFilters(e.target.dataset.filter,document.getElementById('search').value.toLowerCase())}});
    document.getElementById('search').addEventListener('input',e=>applyFilters(document.querySelector('#filters button[aria-pressed="true"]').dataset.filter,e.target.value.toLowerCase()));
    function applyFilters(f,q){document.querySelectorAll('.row').forEach(r=>{const st=r.dataset.status;const nm=r.dataset.name;const tc=r.dataset.teachers;const sm=f==='all'||st===f;const tm=!q||nm.includes(q)||tc.includes(q);r.style.display=sm&&tm?'':'none';});}

    async function load(){const r=await fetch(GVIZ_URL);const txt=await r.text();const m=txt.match(/google\.visualization\.Query\.setResponse\(([\s\S]+)\);/);let payload=m[1];payload=payload.replace(/Date\((\d+),(\d+),(\d+)(?:,(\d+),(\d+),(\d+))?\)/g,(_,Y,M,D,h='0',mi='0',s='0')=>`"${new Date(Date.UTC(+Y,+M,+D,+h,+mi,+s)).toISOString()}"`);const gviz=JSON.parse(payload);const cols=gviz.table.cols.map(c=>(c.label||"").trim());const rows=gviz.table.rows.map(row=>{const o={};(row.c||[]).forEach((c,i)=>o[cols[i]]=c?c.v:"");return o});const data={physics:[],chemistry:[],mathematics:[],biology:[]};rows.forEach(r=>{const subj=(r.Subject||'').toLowerCase();const stream=(r.Stream||'').toLowerCase();const it={index:+r.Index||undefined,title:r.Title,status:(r.Status||'').toLowerCase(),expectedDate:r.ExpectedDate?String(r.ExpectedDate).slice(0,10):"",teacher:r.Teacher,teachers:r["Teacher(s)"]?r["Teacher(s)"].split(',').map(s=>s.trim()):[]};if(subj==='physics'||subj==='chemistry'||subj==='mathematics'){data[subj].push(it)}else if(subj==='biology'||subj==='botany'||subj==='zoology'){it.stream=stream||subj;data.biology.push(it)}});render(data.physics,lists.physics,'physics');render(data.chemistry,lists.chemistry,'chemistry');render(data.mathematics,lists.mathematics,'mathematics');renderBio(data.biology);lastUpdatedEl.textContent="Last updated: "+new Date().toLocaleString('en-IN');}
    load();
  </script>
</body>
</html>
