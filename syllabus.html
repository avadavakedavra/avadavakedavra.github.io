<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sehr Academy — Class 11 Syllabus</title>
  <meta name="theme-color" content="#8BC53F" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&family=Nunito:wght@400;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --sehr-green:#8BC53F;
      --glass-border: rgba(0,0,0,.08);
      --radius: 16px;
      --maxw:1180px;
      --frost-white: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255,255,255,.70));
      --frost-green: linear-gradient(180deg, rgba(214, 244, 190, .95), rgba(180, 232, 140, .78));
      --crystal: linear-gradient(180deg, rgba(255,255,255,.66), rgba(255,255,255,.30));
      --bar-gold: linear-gradient(90deg, #FBE7A1 0%, #F5C14A 50%, #D89A00 100%);
      --pill-bg: linear-gradient(180deg,#ffffff, rgba(255,255,255,.82));
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Nunito,system-ui;background:#fff;color:#0f172a}

    .pagehead{max-width:var(--maxw);margin:22px auto 10px;padding:0 20px}
    .title{font-family:Montserrat;font-weight:900;font-size:26px}
    .stamp{font-family:Montserrat;font-weight:800;font-size:12px;color:#2b3345;opacity:.85}

    .controls{max-width:var(--maxw);margin:6px auto;padding:0 20px;display:flex;gap:10px;flex-wrap:wrap}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid var(--glass-border);background:#fff;font-weight:800;cursor:pointer}
    .chip[aria-pressed="true"]{outline:2px solid rgba(139,197,63,.45)}
    .search{flex:1;min-width:240px;display:flex;align-items:center;background:#f5f7fb;border:1px solid var(--glass-border);border-radius:12px;padding:8px 12px}
    .search input{border:0;background:transparent;outline:none;flex:1;font-weight:800}

    details.group{max-width:var(--maxw);margin:14px auto;border-radius:16px;border:1px solid var(--glass-border);background:var(--frost-white);overflow:hidden}
    summary{cursor:pointer;padding:16px 18px;display:flex;justify-content:space-between;align-items:center;font-family:Montserrat;font-weight:900}

    .prog-wrap{width:200px}
    .prog-rail{width:100%;height:8px;border-radius:999px;background:#eee;overflow:hidden}
    .prog-fill{height:100%;width:0%;background:var(--bar-gold)}
    .prog-note{font-size:10px;font-weight:900;text-align:right}

    .chapters{padding:12px;display:grid;gap:10px}
    .row{
      display:grid;
      grid-template-columns:1fr auto auto auto;
      gap:12px;
      padding:12px;
      border-radius:12px;
      background:var(--crystal);
      border:1px solid rgba(0,0,0,.04)
    }
    .row.completed{background:var(--frost-green)}
    .row.ongoing{background:linear-gradient(180deg,#FFF8E8,#FFF3D9)}

    .name{font-weight:800}
    .status,.teacher,.date{
      font-family:Montserrat;
      font-weight:900;
      font-size:12px;
      padding:6px 8px;
      border-radius:8px;
      background:var(--pill-bg);
      min-width:90px;
      text-align:center
    }
    .status.completed{background:#e8fadf;color:#0a5a1a}
    .status.ongoing{background:#fff4d6}

    @media(max-width:640px){
      .row{grid-template-columns:1fr}
    }
  </style>
</head>

<body>

<header id="site-header"></header>
<script src="/assets/nav.js" defer></script>

<div class="pagehead">
  <div class="title">Class 11 Syllabus — Tracker</div>
  <div class="stamp" id="last-updated"></div>
</div>

<div class="controls">
  <div id="filters">
    <button data-filter="all" class="chip" aria-pressed="true">All</button>
    <button data-filter="pending" class="chip">Pending</button>
    <button data-filter="ongoing" class="chip">Ongoing</button>
    <button data-filter="completed" class="chip">Completed</button>
  </div>
  <div class="search">
    <input id="search" type="search" placeholder="Search chapters or teachers…" />
  </div>
</div>

<!-- SUBJECTS -->
<details class="group">
  <summary>
    Physics
    <span class="prog-wrap">
      <div class="prog-rail"><div class="prog-fill" id="bar-physics"></div></div>
      <div class="prog-note" id="note-physics">0/0</div>
    </span>
  </summary>
  <div class="chapters" id="list-physics"></div>
</details>

<details class="group">
  <summary>
    Chemistry
    <span class="prog-wrap">
      <div class="prog-rail"><div class="prog-fill" id="bar-chemistry"></div></div>
      <div class="prog-note" id="note-chemistry">0/0</div>
    </span>
  </summary>
  <div class="chapters" id="list-chemistry"></div>
</details>

<details class="group">
  <summary>
    Mathematics
    <span class="prog-wrap">
      <div class="prog-rail"><div class="prog-fill" id="bar-mathematics"></div></div>
      <div class="prog-note" id="note-mathematics">0/0</div>
    </span>
  </summary>
  <div class="chapters" id="list-mathematics"></div>
</details>

<script>
const SHEET_ID="1JZ2b4tFp9xqHsauaqti2GtoiWaSLkERPIorJ2n7yAjo";
const RANGE="Sheet1!A1:H";
const API_KEY="AIzaSyBwUJ420X5QdIfPBJ_BM-ZoFiu2gWxPsjo";
const URL=`https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`;

const lists={
  physics:list("physics"),
  chemistry:list("chemistry"),
  mathematics:list("mathematics")
};
const bars={
  physics:bar("physics"),
  chemistry:bar("chemistry"),
  mathematics:bar("mathematics")
};
const notes={
  physics:note("physics"),
  chemistry:note("chemistry"),
  mathematics:note("mathematics")
};

function list(k){return document.getElementById(`list-${k}`)}
function bar(k){return document.getElementById(`bar-${k}`)}
function note(k){return document.getElementById(`note-${k}`)}

function makeRow(r){
  const d=document.createElement("div");
  d.className=`row ${r.Status?.toLowerCase()||"pending"}`;
  d.dataset.status=r.Status?.toLowerCase()||"pending";
  d.dataset.name=r.Title.toLowerCase();
  d.dataset.teachers=(r["Teacher(s)"]||"").toLowerCase();
  d.innerHTML=`
    <div class="name">${r.Index?`${r.Index}. `:""}${r.Title}</div>
    <div class="status ${d.dataset.status}">${d.dataset.status.toUpperCase()}</div>
    <div class="teacher">${r["Teacher(s)"]||"—"}</div>
    <div class="date">${r.ExpectedDate||""}</div>
  `;
  return d;
}

fetch(URL).then(r=>r.json()).then(data=>{
  const [head,...rows]=data.values;
  const obj=rows.map(r=>Object.fromEntries(head.map((h,i)=>[h,r[i]||""])));
  ["physics","chemistry","mathematics"].forEach(s=>{
    const arr=obj.filter(x=>x.Subject.toLowerCase()===s);
    lists[s].innerHTML="";
    let done=0;
    arr.forEach(c=>{
      if(c.Status==="completed")done++;
      lists[s].appendChild(makeRow(c));
    });
    bars[s].style.width=arr.length?`${Math.round(done/arr.length*100)}%`:"0%";
    notes[s].textContent=`${done}/${arr.length}`;
  });
  document.getElementById("last-updated").textContent=
    "Last updated: "+new Date().toLocaleString("en-IN");
});
</script>

</body>
</html>
